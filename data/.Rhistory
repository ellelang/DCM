rm(list = ls())
library(uwIntroStats)
library(matrixcalc)
library(tidyverse)
library(tmvtnorm)
library(mvtnorm)
setwd("C:/Users/langzx/Desktop/github/DCM/data")
dataset <- read.csv (file = "wta_04122020.csv",header = TRUE)
dim(dataset)
n <- dim(dataset)[1]
dataset$asc <- rep(1,n )
dataset$lake1000 <- dataset$implakes/1000
colnames(dataset)
dim(dataset)
n <- dim(dataset)[1]
dataset$asc <- rep(1,n )
dataset$lake1000 <- dataset$implakes/1000
colnames(dataset)
#betas <- read.table("betas04142020.txt", sep = "\t", header = TRUE)
#varcov <- read.table("varscov0414.txt", sep = "\t", header = FALSE)
#varcov_m <- as.matrix(varcov, nrow = 19, ncol = 19)
betas <- read.table("betas04122020.txt", sep = "\t", header = TRUE)
varcov <- read.table("varscov04122020.txt", sep = "\t", header = FALSE)
varcov_test <- read.table("varscovtest.txt", sep = "\t", header = FALSE)
dim(varcov_test)
length(betas$Names)
betas$Names
varcov_m_test <- as.matrix(varcov_test, nrow = 20, ncol = 20)
#varcov_m_test
rmvnorm(1,mean = betas$Betas, sigma = varcov_m)
#varcov_m_test
rmvnorm(1,mean = betas$Betas, sigma = varcov_m_test)
betas$Names
############INDIVIDUAL WTA estimate EXAMPLE
draws <- matrix (NA,nrow = 10, ncol = 20)
colnames(draws)<-c('wetland','pay','cc','nm','asc','dfl','costtax',
'incfarm1','incfarm23','incfarm4','incfarm5','incfarm6',
'farmsi1','farmsi3','fscaware','fscpast','fscapp','fscresp','plake','clake')
dim(varcov_m)
for (r1 in 1 : 10){
drawbetas<- betas
drawbetas$Betas <- as.vector(rmvnorm(1,mean = betas$Betas, sigma = varcov_m_test))
draws[r1, ] <- drawbetas$Betas
}
draws
################## FOR WHOLE SAMPLE
#set.seed(123456)
R <- 500
n <- dim(dataset)[1]
t <- 8
s<- 441
index <- seq(1, n, by=16)
length(index)
n_draws <- 500
wta_vec <- vector (length = 10)
wta_vec
##########wld wta
