rm(list = ls())
library(tidyverse)
library(mvtnorm)
setwd("C:/Users/langzx/Desktop/github/DCM/data")
dataset <- read.csv (file = "wta_observables11192018.csv",header = TRUE)
dim(dataset)
n <- dim(dataset)[1]
dataset$asc <- rep(1,n )
dataset$lake1000 <- dataset$implakes/1000
colnames(dataset)
betas <- read.table("beta0208.dat", sep = ",", header = TRUE)
varcov <- read.table("varcov0208.dat", sep = "\t", header = FALSE)
dim(varcov)
varcov_m <- as.matrix(varcov, nrow = 18, ncol = 18)
varcov_m
betas$Names
betas$Betas
newbetas<- betas
#newbetas$Betas <- as.vector(rmvnorm(1,mean = betas$Betas, sigma = varcov_m))
# coeff
## Payment
pay_rp <- newbetas$Betas[newbetas$Names=="pay"]
## wetland
wld_rp <- newbetas$Betas[newbetas$Names=="wetland"]
## cc
cc_rp <- newbetas$Betas[newbetas$Names=="cc"]
lake_rp <- newbetas$Betas[newbetas$Names=="cclake"]
## nm
nm_rp <- newbetas$Betas[newbetas$Names=="nm"]
length(newbetas$Names)
## fixed parameters
#new_beta2<- c(0,0,0,0,newbetas$Betas[5:17],0)
dat0 <- select (dataset, Wetland, Payment, Covercrop, NuMgt, asc,
dfl08to18,taxcost,
income_1, income_2, income_3, income_4, income_5, income_6,
areaf_1, areaf_2, areaf_3, areaf_4, lake1000)
dat11<-select (dataset, Wetland, Payment, Covercrop, NuMgt, asc,
dfl08to18,taxcost,
income_1, income_2, income_3, income_4, income_5, income_6,
areaf_1, areaf_2, areaf_3, areaf_4, lake1000,County_resident)
groupdata <- dat11 %>%
group_by(County_resident) %>%
summarize_at(vars(-County_resident),funs(mean(., na.rm=TRUE)))
groupdataselect <- select (groupdata, Wetland, Payment, Covercrop, NuMgt, asc,
dfl08to18,taxcost,
income_1, income_2, income_3, income_4, income_5, income_6,
areaf_1, areaf_2, areaf_3, areaf_4, lake1000)
groupdataselect_s_m <- as.matrix(x = groupdataselect, nrow = 1, ncol = 18)
groupbeta <- betas$Betas
groupbeta[1:4] <- c(0,0,0,0)
countylevel <- groupdataselect_s_m %*% as.vector(groupbeta)
mean_wld <- 407.49
mean_cc <- 7.04
mean_nm <- 118.08
write.csv(x = groupdataselect, file = "groupcountydata221.csv", row.names = FALSE)
library(uwIntroStats)
install.packages("uwIntroStats")
#newbetas$Betas <- as.vector(rmvnorm(1,mean = betas$Betas, sigma = varcov_m))
descrip(dataset)
library(uwIntroStats)
#newbetas$Betas <- as.vector(rmvnorm(1,mean = betas$Betas, sigma = varcov_m))
descrip(dataset)
